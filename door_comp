local debug = true

local password = "what"
local input = " "
local closed = 0

while true do
  term.clear()
  term.setCursorPos(1,1)
  write("Enter Password: ")
  
  --input = read()
  --need to replace with loop
  local input = ""
  while true do
    local event, e1, e2, e3, e4, e5 = os.pullEventRaw()
    if event == "key"
    then
      if e1 == 28 -- enter key
      then
        break
      elseif e1 == 14 -- backspace key
      then
        -- backspace, but not past "Enter Password: "
        local x,y = term.getCursorPos()
        term.setCursorPos(math.max(x-1, 17),y)
        write(" ")
        term.setCursorPos(math.max(x-1, 17), y)
        input = input:sub(1, #input-1)
      end
    elseif event == "char"
    then
      write("*")
      input = input .. e1
    elseif event == "terminate" and debug
    then
      return
    end
  end
  
  
  if input == password then
    rs.setOutput("back", true)
    sleep(1)
    rs.setOutput("back", false)
    print("Password Correct")
    print("opening the door...")
    closed = 0
      
    sleep(10)
    while closed ~= 1 do
      print("Type y to close the door")
      input = read()
      if input == "y" then
        rs.setOutput("back", true)
        sleep(1)
        rs.setOutput("back", false)
        closed = 1
      end
    end
  else
    print("Password Incorrect")
  end  
end  
  
  
  
  
